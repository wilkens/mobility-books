work.all<-paste(work, sep=" ", collapse=" ")
#set working directory to target directory
setwd(target.texts)
#write
write(work.all, file=fn.s[i])
}
source.texts<-c("~/Data/txtlab_CONLIT_subGenres_fic/NovelEnglish_PrizeWinners")
target.texts<-c("~/Desktop/PW100")
setwd(source.texts)
#get list of files
fn<-list.files()
#sample n files
n<-100
fn.s<-sample(fn, n)
#loop through ingest and write
for (i in 1:length(fn.s)){
print(i)
#setwd to source texts directory
setwd(source.texts)
#ingest
work<-scan(fn.s[i], what="character", quote="", quiet=T)
### insert cleaning steps here ###
#remove numbers
#work<-gsub("\\d", "", work)
#split on punctuation
#work<-unlist(strsplit(work,"[[:punct:]]"))
#make all lowercase
#work<-tolower(work)
#remove blanks
#work<-work[work != ""]
#paste as single string
work.all<-paste(work, sep=" ", collapse=" ")
#set working directory to target directory
setwd(target.texts)
#write
write(work.all, file=fn.s[i])
}
library(gutenbergr)
a<-as.data.frame(gutenberg_subjects)
View(a)
View(a)
a<-as.data.frame(gutenberg_subjects)
meta<-as.data.frame(gutenberg_metadata)
meta.en<-meta[meta$language == "en",]
meta<-meta[meta$has_text == "TRUE",]
meta.en<-meta[meta$language == "en",]
a<-a[which(a$gutenberg_id %in% meta.en$gutenberg_id),]
a<-as.data.frame(gutenberg_subjects)
#get metadata
meta<-as.data.frame(gutenberg_metadata)
#subset by language and full text
meta<-meta[meta$has_text == "TRUE",]
meta.en<-meta[meta$language == "en",]
setwd("~/Research/biodiversity")
#get external list of books
id<-read.csv("16k Texts.txt", header=F, sep="\t")
View(id)
id$V1<-gsub("PG", "", id$V1)
sub<-meta.en[meta.en$gutenberg_id %in% id$V1,]
View(sub)
sub.meta<-meta.en[meta.en$gutenberg_id %in% id$V1,]
sub.a<-a[a$gutenberg_id %in% sub.meta$gutenberg_id,]
View(sub.a)
View(meta)
View(meta.en)
View(sub)
auth<-as.data.frame(gutenberg_authors)
View(auth)
View(sub.meta)
sub.auth<-auth[auth$gutenberg_author_id %in% sub.meta$gutenberg_author_id,]
View(sub.auth)
#map birth-dates on book IDs
library(plyr)
View(sub.meta)
test1<-mapvalues(sub.meta$gutenberg_author_id, from=sub.auth$birthdate, to=sub.meta$gutenberg_author_id)
View(sub.auth)
View(sub.meta)
View(sub.auth)
test1<-mapvalues(sub.meta$gutenberg_author_id, from=sub.auth$birthdate, to=sub.auth$gutenberg_author_id)
test1<-mapvalues(sub.meta$gutenberg_author_id, from=sub.auth$gutenberg_author_id, to=sub.auth$birthdate)
sub.meta$birthdate<-mapvalues(sub.meta$gutenberg_author_id, from=sub.auth$gutenberg_author_id, to=sub.auth$birthdate)
View(sub.meta)
View(sub.auth)
View(sub.meta)
View(sub.meta)
#test
test<-sub.meta[1:5,]
#download books
books<-gutenberg_download(test$gutenberg_id, meta_fields = "gutenberg_id", "title")
View(test)
#download books
books<-gutenberg_download(test$gutenberg_id, meta_fields = "title")
test$gutenberg_id
#download books
books<-gutenberg_download(test$gutenberg_id[1])
View(books)
#download books
books<-gutenberg_download(768)
my_mirror <- "http://mirrors.xmission.com/gutenberg/"
books<-gutenberg_download(test, mirror = my_mirror)
View(books)
View(books)
#test
test<-sub.meta[1:5000,]
sub<-books[books$gutenberg_id == as.numeric(levels(as.factor(books$gutenberg_id)))[i],]
i=1
sub<-books[books$gutenberg_id == as.numeric(levels(as.factor(books$gutenberg_id)))[i],]
View(sub)
sub1<-paste(sub$text, collapse = " ")
sub$gutenberg_id[1]
#create custon filename
file.name<-paste("PG", sub$gutenberg_id[1], ".txt", sep = "")
file.name
sub<-books[books$gutenberg_id == as.numeric(levels(as.factor(books$gutenberg_id)))[i],]
#collapse into a single unit
sub1<-paste(sub$text, collapse = " ")
#create custon filename
file.name<-paste("PG", sub$gutenberg_id[1], ".txt", sep = "")
#removes spaces, removes line breaks (twice!), removes chars after the first 20
#file.name<-paste(sub$gutenberg_id[1],"_", gsub("\n", "", substr(gsub("[[:punct:]]", "",gsub(" ", "", sub$title[1], fixed = TRUE)), 1,20), fixed=TRUE),".txt", sep="")
#file.name<-gsub("\r", "", file.name, fixed = T)
#write file
write(sub1, file=file.name)
setwd("~/Data/gut_BIO")
sub<-books[books$gutenberg_id == as.numeric(levels(as.factor(books$gutenberg_id)))[i],]
#collapse into a single unit
sub1<-paste(sub$text, collapse = " ")
#create custon filename
file.name<-paste("PG", sub$gutenberg_id[1], ".txt", sep = "")
#removes spaces, removes line breaks (twice!), removes chars after the first 20
#file.name<-paste(sub$gutenberg_id[1],"_", gsub("\n", "", substr(gsub("[[:punct:]]", "",gsub(" ", "", sub$title[1], fixed = TRUE)), 1,20), fixed=TRUE),".txt", sep="")
#file.name<-gsub("\r", "", file.name, fixed = T)
#write file
write(sub1, file=file.name)
test<-sub.meta[1:5000,]
#download books
my_mirror <- "http://mirrors.xmission.com/gutenberg/"
books<-gutenberg_download(test, mirror = my_mirror)
#set working directory
setwd("~/Data/gut_BIO")
#for every book
for (i in 1:length(unique(books$gutenberg_id))){
print(i)
#subset by individual book
sub<-books[books$gutenberg_id == as.numeric(levels(as.factor(books$gutenberg_id)))[i],]
#collapse into a single unit
sub1<-paste(sub$text, collapse = " ")
#create custon filename
file.name<-paste("PG", sub$gutenberg_id[1], ".txt", sep = "")
#removes spaces, removes line breaks (twice!), removes chars after the first 20
#file.name<-paste(sub$gutenberg_id[1],"_", gsub("\n", "", substr(gsub("[[:punct:]]", "",gsub(" ", "", sub$title[1], fixed = TRUE)), 1,20), fixed=TRUE),".txt", sep="")
#file.name<-gsub("\r", "", file.name, fixed = T)
#write file
write(sub1, file=file.name)
}
install.packages("XML")
library(XML)
url<-"https://horizon.mcgill.ca/pban1/bwlkfcwl.P_FacClaListSum"
test<-readHTMLTable(url)
install.packages("data.table")
library(data.table)
test<-fread("Record
Number	Waitlist Position	Student Name	ID	Reg Status	Level	Credits	Degree	Program	Major	Class	Telephone	Email	Notification Expires
1	0	Akkad, Sarah	261025204	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 2	(514) 553-2403	sarah.akkad@mail.mcgill.ca
2	0	Alryyes, Aya	261096404	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Environment -IFP	UG Level Year 1 New	(718) 422-7799	aya.alryyes@mail.mcgill.ca
3	0	Assaadi, Omar	261045731	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Software Engineering -Con *	UG Level Year 2	(+1)	omar.assaadi@mail.mcgill.ca
4	0	Baptista, Amelia	261093009	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Environment -IFP	UG Level Year 1 New	Intl:2426025074	amelia.baptista@mail.mcgill.ca
5	0	Bazzari, Shireen	261077744	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1 New	(514) 679-0320 Intl:971504551760	shireen.bazzari@mail.mcgill.ca
6	0	Beachy, Lilou	261097833	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	(319) 248-3505	lilou.beachy@mail.mcgill.ca
7	0	Bisera, Maxine	261035569	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Biology -Con *	UG Level Year 1Returning	(438) 855-2695	maxine.bisera@mail.mcgill.ca
8	0	Blakeley, Roan	261002961	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Biology -Con *	UG Level Year 1Returning	(443) 433-2589	roan.blakeley@mail.mcgill.ca
9	0	Boileau, Anthony	261120255	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1 New	(514) 945-0707	anthony.boileau@mail.mcgill.ca
10	0	Byrde, Hannah	261069615	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Sustainability, Sci & Soc -IFP	UG Level Year 1 New	(404) 276-1389	hannah.byrde@mail.mcgill.ca
11	0	Campos-Gutierrez, Sofia	261083715	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	(902) 436-8816	sofia.campos-gutierrez@mail.mcgill.ca
12	0	Chaddock, Sarah	260892223	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	English -Con *	UG Level Year 3	(514) 464-7025	sarah.chaddock@mail.mcgill.ca
13	0	Chow, Nick	261020753	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Biology -Con *	UG Level Year 1Returning	(416) 256-7699	nicholas.chow@mail.mcgill.ca
14	0	Chuang Yong Zhu, Yasmin	261086274	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	N/A	yasmin.chuangyongzhu@mail.mcgill.ca
15	0	Colak, Melek Deniz	261029907	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1Returning	(438) 493-5261	melek.colak@mail.mcgill.ca
16	0	Connor, Frank	261094970	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Undeclared	UG Level Year 1 New	(503) 799-8311	frank.connor@mail.mcgill.ca
17	0	Cormier, Maddy	261038123	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1Returning	(902) 452-2211	madelyn.cormier@mail.mcgill.ca
18	0	Creeggan, Finn	261090445	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science Honours	Cognitive Science -Hon	UG Level Year 1 New	(647) 248-8792	finn.creeggan@mail.mcgill.ca
19	0	Daley, Kendyl	261103283	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	(506) 546-9453	kendyl.daley@mail.mcgill.ca
20	0	Dallaire, Alexia	261049771	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 2	N/A	alexia.dallaire@mail.mcgill.ca
21	0	Depras, Valentine	260986917	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Sustainability, Sci & Soc -IFP	UG Level Year 3	(438) 816-5774	valentine.depras@mail.mcgill.ca
22	0	Docherty, Curtis	260769767	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 3	(514) 865-9910	curtis.docherty@mail.mcgill.ca
23	0	Du, Roberta	261041347	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1Returning	(416) 566-0821	roberta.du@mail.mcgill.ca
24	0	Dupuis, Maude	261115413	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1 New	N/A	maude.dupuis@mail.mcgill.ca
25	0	Durkee, Elliot	261008316	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 2	Intl:1-216-212-9898	elliot.durkee@mail.mcgill.ca
26	0	Dworkind, Chavy	261018177	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1 New	(514) 605-7499	chava.dworkind@mail.mcgill.ca
27	0	Emond, Margot	261120309	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Biology -Con *	UG Level Year 1 New	(514) 702-7127	margot.emond@mail.mcgill.ca
28	0	Escallon, Sara	260959496	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Environment -IFP	UG Level Year 2	(416) 656-3124	sara.escallon@mail.mcgill.ca
29	0	Farmer, Sarah	260852940	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Sustainability, Sci & Soc -IFP	UG Level Year 2	(819) 923-2352	sarah.farmer2@mail.mcgill.ca
30	0	Fass, Caitlin	261101694	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Environment -IFP	UG Level Year 1 New	(781) 721-1298	caitlin.fass@mail.mcgill.ca
31	0	Gaisi, Kayla	261090163	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1 New	(917) 392-9447	kayla.gaisi@mail.mcgill.ca
32	0	Gaither, Liam	261055383	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Sustainability, Sci & Soc -IFP	UG Level Year 2	(514) 489-3619	liam.gaither@mail.mcgill.ca
33	0	Gaudreau, Sophie	260987271	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Sustainability, Sci & Soc -IFP	UG Level Year 3	(438) 390-4443	sophie.gaudreau@mail.mcgill.ca
34	0	Greenhill, Josephine	261118226	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science Honours	Mathematics -HC *	UG Level Year 1 New	(438) 229-2000	josephine.greenhill@mail.mcgill.ca
35	0	Grewal, Hannah	261035983	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Chemistry -Con *	UG Level Year 1Returning	(604) 724-4754	hannah.grewal@mail.mcgill.ca
36	0	Grunau, Owen	261079362	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	(587) 969-0999	owen.grunau@mail.mcgill.ca
37	0	Guevara Castillo, Rebeca	260909598	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Environment -IFP	UG Level Year 3	(1)	rebeca.guevaracastillo@mail.mcgill.ca
38	0	Guo, Eugene	260910758	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science Honours	Cognitive Science -Hon	UG Level Year 2	(86) Intl:17307322602	yuzan.guo@mail.mcgill.ca
39	0	Guyoncour, Joann	261068288	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science Honours	Cognitive Science -Hon	UG Level Year 1 New	Intl:262693496008	joann.guyoncour@mail.mcgill.ca
40	0	Haring, Julia	261117044	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1 New	(514) 630-8496	julia.haring@mail.mcgill.ca
41	0	Harman, Paige	261023566	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Psychology -Con *	UG Level Year 1Returning	(626) 808-1962	paige.harman@mail.mcgill.ca
42	0	Hartwick, Ben	261011198	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science Honours	Cognitive Science -Hon	UG Level Year 2	(732) 742-5153	benjamin.hartwick@mail.mcgill.ca
43	0	Hempstead, Lindsay	260901820	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Software Engineering -Con *	UG Level Year 3	(250) 552-8255	lindsay.hempstead@mail.mcgill.ca
44	0	Hornung, Rachel	260892621	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 2	(613) 325-9823	rachel.hornung@mail.mcgill.ca
45	0	Hua, Doris	261097459	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	English -Con *	UG Level Year 1 New	(416) 998-3798	doris.hua@mail.mcgill.ca
46	0	Hunt-Isaak, Anna Rose	261077818	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Undeclared	UG Level Year 1 New	(610) 527-4206	anna.hunt-isaak@mail.mcgill.ca
47	0	Johnson, Simon	261068871	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Environment -IFP	UG Level Year 1 New	N/A	simon.johnson@mail.mcgill.ca
48	0	Jousse, Iseline	260977915	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Environment -IFP	UG Level Year 3	N/A	iseline.jousse@mail.mcgill.ca
49	0	Karam, Talia	260988945	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 3	(514) 737-1212	talia.karam@mail.mcgill.ca
50	0	Kelly, Shona	260945313	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Psychology -Con *	UG Level Year 2	N/A	shona.kelly@mail.mcgill.ca
51	0	Kim, Hanni	261042348	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1Returning	(207) 267-0754	hanni.kim@mail.mcgill.ca
52	0	Koch-Schulte, Annelies	260985235	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Sustainability, Sci & Soc -IFP	UG Level Year 1Returning	(438) 530-6673	annelies.koch-schulte@mail.mcgill.ca
53	0	Kosaraju, Arya	261070081	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	(212) 744-6936	arya.kosaraju@mail.mcgill.ca
54	0	Koseleci-Vieira, Miles	261092358	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	(905) 975-6559	miles.koseleci-vieira@mail.mcgill.ca
55	0	Labelle, Anya	261075853	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	(780) 964-9500	anya.labelle@mail.mcgill.ca
56	0	Lagakos, Maria	261098310	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1 New	(514) 684-0923	maria.lagakos@mail.mcgill.ca
57	0	Lao, Joannie	261112381	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	(416) 509-5115	joannie.lao@mail.mcgill.ca
58	0	Laskin, Mackenzie	260905277	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Sustainability, Sci & Soc -IFP	UG Level Year 3	(519) 637-1106 Ext:2264487428	mackenzie.laskin@mail.mcgill.ca
59	0	Lewis, Anae	260330960	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 3	(514) 944-2632	berlyn.lewis@mail.mcgill.ca
60	0	Li, Rob	261089903	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Undeclared	UG Level Year 1 New	(403) 269-9538	rob.li@mail.mcgill.ca
61	0	Lindsay-Stodart, Simon	261077546	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	N/A	simon.lindsay-stodart@mail.mcgill.ca
62	0	Liu, Sifan	261074704	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 0	Intl:8615669229055	sifan.liu@mail.mcgill.ca
63	0	Liu, Yuhan	260947121	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science Honours	Cognitive Science -Hon	UG Level Year 2	(873) 992-6558	janou.liu@mail.mcgill.ca
64	0	Longley, Esme	260961846	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Sustainability, Sci & Soc -IFP	UG Level Year 2	(919) 408-1247	esme.longley@mail.mcgill.ca
65	0	Lu, Alexander	260893936	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 2	(438) 270-3342	alexander.lu2@mail.mcgill.ca
66	0	MacGregor, Jane	260896162	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Psychology -Con *	UG Level Year 3	(905) 330-5227	jane.macgregor2@mail.mcgill.ca
67	0	Martin, Zoe	261039501	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science Honours	Cognitive Science -Hon	UG Level Year 2	(650) 967-1917	zoe.martin@mail.mcgill.ca
68	0	Mateos, Elsa	261091021	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Sustainability, Sci & Soc -IFP	UG Level Year 1 New	Intl:33783497713	elsa.mateos@mail.mcgill.ca
69	0	Meng, Sophia	261015519	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1Returning	(647) 937-7987	qiyu.meng@mail.mcgill.ca
70	0	Mitran, Luca	261032385	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 2	(919) 636-4196	luca.mitran@mail.mcgill.ca
71	0	Nam, Gloria	261026284	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1Returning	(1)	ji.m.nam@mail.mcgill.ca
72	0	Osdoba, Ella	261068920	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	(507) 341-2688	ella.osdoba@mail.mcgill.ca
73	0	Peng, Shuang	260948109	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Economics -Con *	UG Level Year 2	(438) 725-0808	shuang.peng2@mail.mcgill.ca
74	0	Perkins, Sydney	261112071	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	(415) 888-3115	sydney.perkins@mail.mcgill.ca
75	0	Puhky, Gabe	260852458	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1Returning	(250) 644-4215	gabriel.puhky@mail.mcgill.ca
76	0	Qu, Zhang	260885418	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Mathematics -Con *	UG Level Year 3	N/A	zhang.qu@mail.mcgill.ca
77	0	Quinn, Rosalie	260922986	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 3	(514) 974-0447	rosalie.quinn@mail.mcgill.ca
78	0	Ramaroson, Arinala	261089951	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Psychology -Con *	UG Level Year 1 New	(514) 562-7965	arinala.ramaroson@mail.mcgill.ca
79	0	Ramloll, Leatisha	261048244	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1Returning	(+1)	leatisha.ramloll@mail.mcgill.ca
80	0	Root, Leigh	261002137	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Psychology -Con *	UG Level Year 1Returning	(917) 856-7554	leigh.root@mail.mcgill.ca
81	0	Roulet, Jonathan	260944010	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 2	N/A	jonathan.roulet@mail.mcgill.ca
82	0	Roy, Ã‰milie	261112098	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science Honours	Cognitive Science -Hon	UG Level Year 1 New	(613) 841-2345	emilie.roy3@mail.mcgill.ca
83	0	Rye, Mircea	261073930	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	(778) 584-0584	mircea.rye@mail.mcgill.ca
84	0	Sagner, Sarah	261069213	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Statistics -Con *	UG Level Year 1 New	(914) 629-6631	sarah.sagner@mail.mcgill.ca
85	0	Sakajiri, Natan	261019038	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Mathematics -Con *	UG Level Year 1Returning	(343) 540-5257	natan.sakajiri@mail.mcgill.ca
86	0	Sande, Kyra	261100034	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Sustainability, Sci & Soc -IFP	UG Level Year 1 New	(925) 399-6765	kyra.sande@mail.mcgill.ca
87	0	Sarkar, Moumita	261112105	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science Honours	Cognitive Science -Hon	UG Level Year 1 New	(88)	moumita.sarkar@mail.mcgill.ca
88	0	Schleifer, Noa	261004963	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Undeclared	UG Level Year 1 New	(202) 543-2184	noa.schleifer@mail.mcgill.ca
89	0	Sekulich, Rowan	261033463	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1Returning	(250) 923-3421	rowan.sekulich@mail.mcgill.ca
90	0	Shu, Ann Ning	261086470	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Psychology -Con *	UG Level Year 1 New	N/A	ann.shu@mail.mcgill.ca
91	0	Silverman, Lucinda	261077608	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	(215) 906-0635	lucinda.silverman@mail.mcgill.ca
92	0	Singer, Morgan	261074795	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Political Science -Con *	UG Level Year 1 New	N/A	morgan.singer@mail.mcgill.ca
93	0	Smith, Fiona	260966409	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Psychology -Con *	UG Level Year 1Returning	(720) 666-1980	fiona.smith@mail.mcgill.ca
94	0	Soan, Mei	261118334	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Psychology -Con *	UG Level Year 1 New	(514) 254-8730	mei.soan@mail.mcgill.ca
95	0	Stewart, Lisa	261072173	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	(438) 528-8142	lisa.stewart@mail.mcgill.ca
96	0	Tan, Megan	261010985	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1Returning	(403) 808-2958	megan.tan2@mail.mcgill.ca
97	0	Thomson, Claire	260958115	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Psychology -Con *	UG Level Year 2	(604) 898-2647	claire.thomson@mail.mcgill.ca
98	0	Tinmouth, Amalia	261084467	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Intnl Development Studies -Con *	UG Level Year 1 New	(1)	amalia.tinmouth@mail.mcgill.ca
99	0	Toth, Julia	260970734	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Biology -Con *	UG Level Year 3	(819) 441-8684	julia.toth@mail.mcgill.ca
100	0	Touil, Amel	261078553	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1 New	Intl:33678473147	amel.touil@mail.mcgill.ca
101	0	Tremblay, Alexa	260955125	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1 New	(514) 609-4559	alexa.tremblay@mail.mcgill.ca
102	0	Trinh, Huy	261015197	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Computer Science -Con *	UG Level Year 1Returning	(438) 930-8156	huy.trinh2@mail.mcgill.ca
103	0	Tsukada, Mahiro	261076268	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Economics -Con *	UG Level Year 1 New	Intl:66657312091	mahiro.tsukada@mail.mcgill.ca
104	0	Tyagi, Keya	261117301	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1 New	(514) 679-6785	keya.tyagi@mail.mcgill.ca
105	0	Varma, Varsha	261097185	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1 New	(973) 653-0976	varsha.varma@mail.mcgill.ca
106	0	Vernet, Misha	261093197	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1 New	(201) 444-6204	mikael.vernet@mail.mcgill.ca
107	0	Vilkoff, Nicole	261027199	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 2	(613) 879-5046	nicole.vilkoff@mail.mcgill.ca
108	0	Walsh, Olivia	261087615	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	(416) 848-3457	olivia.walsh@mail.mcgill.ca
109	0	Wang, Andrae	261008934	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1Returning	(438) 873-7168	wailin.wang@mail.mcgill.ca
110	0	Watson, Lia	261034465	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Sustainability, Sci & Soc -IFP	UG Level Year 1Returning	(604) 771-8782	lia.watson@mail.mcgill.ca
111	0	Weider, Sophie	260971726	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Sustainability, Sci & Soc -IFP	UG Level Year 2	(613) 234-0488	sophie.weider@mail.mcgill.ca
112	0	Weng, Jenny	261035394	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Chemistry -Con *	UG Level Year 1Returning	N/A	jenny.weng@mail.mcgill.ca
113	0	Wentges, Ava	261097197	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Freshman Program	UG Level Year 0	(613) 513-8901	ava.wentges@mail.mcgill.ca
114	0	Yin, Charlene	260971738	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science Honours	Cognitive Science -Hon	UG Level Year 2	(778) 987-0922	charlene.yin@mail.mcgill.ca
115	0	Zemel, Macey	261049898	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1 New	(514) 989-7112	macey.zemel@mail.mcgill.ca
116	0	Zhang, Elva	261095171	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Cognitive Science -IFP	UG Level Year 1 New	N/A	jiani.zhang@mail.mcgill.ca
117	0	Ziannis, Maria	261055541	Web Registered	Undergraduate	3.000	Bachelor of Arts and Science	B Arts and Science	Sustainability, Sci & Soc -IFP	UG Level Year 2	(514) 812-0129	maria.ziannis@mail.mcgill.ca	 ")
View(test)
table(test$Major)
sort(table(test$Major), decreasing = T)
sum(sort(table(test$Major), decreasing = T))
38+17+13++9
test2<-test$Major[grep("*", test$Major)]
test2
grep("*", test$Major)
grep("\*", test$Major)
grep("\\*", test$Major)
test2<-test$Major[grep("\\*", test$Major)]
test2
test2<-test[grep("\\*", test$Major),]
View(test2)
test3<-test[grep("Freshman", test$Major),]
29+17
View(test)
eug.boys<-data.frame(c(94,90), c(169, 206))
colnames(eug.boys)<-c("Intelligent", "Slow")
row.names(eug.boys)<-c("Literate", "Illiterate")
fisher.test(eug.boys)
View(eug.boys)
eug.girls<-data.frame(c(164,155), c(122,166))
colnames(eug.girls)<-c("Intelligent", "Slow")
row.names(eug.girls)<-c("Literate", "Illiterate")
fisher.test(eug.girls)
View(eug.girls)
eug.boys<-data.frame(c(94,90), c(169, 206))
colnames(eug.boys)<-c("Intelligent", "Slow")
row.names(eug.boys)<-c("Literate", "Illiterate")
fisher.test(eug.boys)
View(eug.boys)
eug.girls<-data.frame(c(164,155), c(122,166))
colnames(eug.girls)<-c("Intelligent", "Slow")
row.names(eug.girls)<-c("Literate", "Illiterate")
fisher.test(eug.girls)
View(eug.girls)
install.packages("entropy")
library(entropy)
entropy(c(1,2,3))
entropy(c(1,2,2))
entropy(c(2,2,2))
entropy(c(1,2,3,3,3))
entropy(c(2,2,2,2,2))
entropy(c(1))
entropy(c(1,2))
entropy(c(1,1))
entropy(c(.5))
entropy(c(.5, .5))
0.001315089/0.001307219
.007568314/.005336124
library(httr)
library(tidyverse)
# API key
my_API <- "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"
#The "hey_chatGPT function will help you access the API and prompt GPT
hey_chatGPT <- function(answer_my_question) {
chat_GPT_answer <- POST(
url = "https://api.openai.com/v1/chat/completions",
add_headers(Authorization = paste("Bearer", my_API)),
content_type_json(),
encode = "json",
body = list(
model = "gpt-4-1106-preview", #gpt-4-1106-preview, gpt-4-0613, gpt-3.5-turbo-0301, gpt-3.5-turbo-0613, gpt-3.5-turbo-16k-0613, gpt-4-0613, gpt-4-32k
temperature = 0,
messages = list(
list(
role = "user",
content = answer_my_question
)
)
)
)
str_trim(content(chat_GPT_answer)$choices[[1]]$message$content)
}
#set working directory
setwd("/Users/akpiper/Research/Generalization_Literary")
# Read in dataset
data <- read_csv("CONLIT_predictions_02_AllPositive.csv")
#randomize order
#data<-data[sample(nrow(data), nrow(data)),]
#transform into numeric codes
#data$Human.Label<-unlist(lapply(data$Label, function (x) if(x == "Cognition"){x<-1} else {x<-0}))
# Create a "gpt" column
data$gpt<-NA
data<-data[1:20,]
for (i in 1:nrow(data)) {
print(i)
#gpt
question <- "
A literary universal is a sentence you find in a story where the author makes a general
statement about the world that aims to identify a deeper truth. An example of a literary universal would
be - All creatures come into the world bringing with them the memory of justice - or -
In every language there reside other eyes. For each sentence I show you please answer the question, Is this a literary universal?
Answer only with a number: 1 if yes, 0 if no, and then add your explanation for why you chose that answer. Here is the text:"
text <- data[i,3] #change column number to match where your text is
concat <- paste(question, text)
result <- hey_chatGPT(concat)
while(length(result) == 0){
result <- hey_chatGPT(concat)
print(result)
}
#specify GPT output column
data$gpt[i] <- result
}
View(data)
data <- read_csv("CONLIT_predictions_02_AllPositive.csv")
data$gpt<-NA
View(data)
for (i in 1:nrow(data)) {
print(i)
#gpt
question <- "
A literary universal is a sentence you find in a story where the author makes a general
statement about the world that aims to identify a deeper truth. An example of a literary universal would
be - All creatures come into the world bringing with them the memory of justice - or -
In every language there reside other eyes. For each sentence I show you please answer the question, Is this a literary universal?
Answer only with a number: 1 if yes, 0 if no. Here is the text:"
text <- data[i,3] #change column number to match where your text is
concat <- paste(question, text)
result <- hey_chatGPT(concat)
while(length(result) == 0){
result <- hey_chatGPT(concat)
print(result)
}
#specify GPT output column
data$gpt[i] <- result
}
View(data)
table(data$gpt)
test<-data[data$gpt == 1,]
View(test)
View(data)
data$gpt2<-NA
setwd("/Users/akpiper/Research/Generalization_Literary")
write.csv(data, file="GPT_Lit_Generalization_Annotations.csv", row.names = F)
View(data)
for (i in 1:nrow(data)) {
print(i)
#gpt
# question <- "
# A literary universal is a sentence you find in a story where the author makes a general
# statement about the world that aims to identify a deeper truth. An example of a literary universal would
# be - All creatures come into the world bringing with them the memory of justice - or -
# In every language there reside other eyes. For each sentence I show you please answer the question, Is this a literary universal?
# Answer only with a number: 1 if yes, 0 if no. Here is the text:"
#
question <- "
A literary universal is a sentence you find in a story where the author makes a general
statement about the world that aims to identify a deeper truth. It does not refer to a single person or character but instead some general category or group.
An example of a literary universal would
be - All creatures come into the world bringing with them the memory of justice - or -
In every language there reside other eyes. For each sentence I show you please answer the question, Is this a literary universal?
Answer only with a number: 1 if yes, 0 if no. Here is the text:"
text <- data[i,3] #change column number to match where your text is
concat <- paste(question, text)
result <- hey_chatGPT(concat)
while(length(result) == 0){
result <- hey_chatGPT(concat)
print(result)
}
#specify GPT output column
data$gpt2[i] <- result
}
data$gpt2<-NA
for (i in 1:nrow(data)) {
print(i)
#gpt
# question <- "
# A literary universal is a sentence you find in a story where the author makes a general
# statement about the world that aims to identify a deeper truth. An example of a literary universal would
# be - All creatures come into the world bringing with them the memory of justice - or -
# In every language there reside other eyes. For each sentence I show you please answer the question, Is this a literary universal?
# Answer only with a number: 1 if yes, 0 if no. Here is the text:"
#
question <- "
A literary universal is a sentence you find in a story where the author makes a general
statement about the world that aims to identify a deeper truth. It does not refer to a single person or character but instead some general category or group.
An example of a literary universal would
be - All creatures come into the world bringing with them the memory of justice - or -
In every language there reside other eyes. For each sentence I show you please answer the question, Is this a literary universal?
Answer only with a number: 1 if yes, 0 if no. Here is the text:"
text <- data[i,3] #change column number to match where your text is
concat <- paste(question, text)
result <- hey_chatGPT(concat)
while(length(result) == 0){
result <- hey_chatGPT(concat)
print(result)
}
#specify GPT output column
data$gpt2[i] <- result
}
setwd("/Users/akpiper/Documents/GitHub/mobility-books/data/derived")
c<-read.csv(gzfile("CONLIT_CharData_AP_MW_11.csv.gz"))
c.test<-c[c$inf_gender %in% c("she/her", "he/him/his"),]
c.fic<-c.test[c.test$Category == "FIC",]
c.fic.adult<-c.fic[!c.fic$Genre %in% c("MID", "YA"),]
t.test(avg_Distance_GPE_Tokens ~ inf_gender, data=c.fic.adult)
t.test(avg_Distance_GPE_Tokens ~ inf_gender, data=c.fic)
wilcox.test(avg_Distance_GPE_Tokens ~ inf_gender, data=c.fic.adult)
median(c.fic.adult$avg_Distance_GPE_Tokens[c.fic.adult$inf_gender == "he/him/his"])
median(c.fic.adult$avg_Distance_GPE_Tokens[c.fic.adult$inf_gender == "she/her"])
hist(c.fic.adult$avg_Distance_GPE_Tokens)
t.test(avg_Distance_GPE ~ inf_gender, data=c.fic.adult)
wilcox.test(avg_Distance_GPE ~ inf_gender, data=c.fic.adult)
t.test(num_gpe_places_norm_byCharacter ~ inf_gender, data=c.fic.adult)
wilcox.test(num_gpe_places_norm_byCharacter ~ inf_gender, data=c.fic.adult)
wilcox.test(avg_Distance_GPE_Tokens ~ inf_gender, data=c.fic.adult)
wilcox.test(num_gpe_places_norm_byCharacter ~ inf_gender, data=c.fic.adult)
t.test(num_gpe_places_norm_byCharacter ~ inf_gender, data=c.fic.adult)
wilcox.test(num_gpe_places_norm_byCharacter ~ inf_gender, data=c.fic.adult)
#physical distance by genre controlling for gender
c.fic.adult.she<-c.fic.adult[c.fic.adult$inf_gender == "she/her",]
model <- aov(avg_Distance_GPE_Tokens ~ Genre, data = c.fic.adult.she)
tukey_result <- TukeyHSD(model)
plot(tukey_result)
plot(tukey_result, las=2)
plot(aov(avg_Distance_GPE_Tokens ~ Genre, data = c.fic.adult.she))
plot(aov(avg_Distance_GPE_Tokens ~ Genre, data = c.fic.adult.she))
plot(avg_Distance_GPE_Tokens ~ Genre, data = c.fic.adult.she)
plot(avg_Distance_GPE_Tokens ~ factor(Genre), data = c.fic.adult.she)
#remove romance
c.fic.adult2<-c.fic.adult2[c.fic.adult$Genre != "ROM",]
#remove romance
c.fic.adult2<-c.fic.adult[c.fic.adult$Genre != "ROM",]
t.test(avg_Distance_GPE_Tokens ~ inf_gender, data=c.fic.adult2)
wilcox.test(avg_Distance_GPE_Tokens ~ inf_gender, data=c.fic.adult2)
summary(lm(avg_Distance_GPE_Tokens ~ inf_gender + Category+Genre, data=c.test))
summary(lm(avg_Distance_GPE_Tokens ~ inf_gender + Genre, data=c.fic.adult))
table(c$inf_gender[c$Genre == "NYT"])
table(c$inf_gender[c$Genre == "PW"])
plot(avg_Distance_GPE_Tokens ~ factor(Genre), data = c.fic.adult)
